"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("middleware",{

/***/ "(middleware)/./src/middleware.ts":
/*!***************************!*\
  !*** ./src/middleware.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   middleware: () => (/* binding */ middleware)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(middleware)/./node_modules/next/dist/esm/api/server.js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @supabase/supabase-js */ \"(middleware)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\n\n// Define the protected routes that require authentication\nconst protectedRoutes = [\n    \"/proposals\",\n    \"/new\"\n];\nasync function middleware(request) {\n    // Check if the route is protected\n    const isProtectedRoute = protectedRoutes.some((route)=>request.nextUrl.pathname.startsWith(route));\n    // Skip middleware for non-protected routes and API routes\n    if (!isProtectedRoute || request.nextUrl.pathname.startsWith(\"/api\")) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n    }\n    // Get Supabase cookies from the request for server-side auth check\n    const supabaseUrl = \"https://rqwgqyhonjnzvgwxbrvh.supabase.co\" || 0;\n    const supabaseKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJxd2dxeWhvbmpuenZnd3hicnZoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDM1NDEyMjEsImV4cCI6MjA1OTExNzIyMX0.v86ffe7dc_7-NcC-i9K4UCMW4pbpTTMiAQt-U6kybB4\" || 0;\n    if (!supabaseUrl || !supabaseKey) {\n        console.error(\"Missing Supabase environment variables\");\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n    }\n    // Create a Supabase client with the cookies from the request\n    const supabaseClient = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_1__.createClient)(supabaseUrl, supabaseKey, {\n        auth: {\n            persistSession: false,\n            autoRefreshToken: false,\n            detectSessionInUrl: false\n        }\n    });\n    // Get the auth cookies from the request\n    const authCookie = request.cookies.get(\"sb-auth-token\") || request.cookies.get(\"supabase-auth-token\");\n    // If no auth cookie is present, redirect to login\n    if (!authCookie) {\n        console.log(\"No auth cookie found, redirecting to login\");\n        const redirectUrl = new URL(\"/login\", request.url);\n        redirectUrl.searchParams.set(\"redirect\", request.nextUrl.pathname);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(redirectUrl);\n    }\n    try {\n        // Try to get the session using the cookie\n        const { data: { session } } = await supabaseClient.auth.getSession();\n        // If there's no active session and the route is protected, redirect to login\n        if (!session && isProtectedRoute) {\n            console.log(\"No active session found, redirecting to login\");\n            const redirectUrl = new URL(\"/login\", request.url);\n            redirectUrl.searchParams.set(\"redirect\", request.nextUrl.pathname);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(redirectUrl);\n        }\n    } catch (error) {\n        console.error(\"Error in auth middleware:\", error);\n    }\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n}\n// Run middleware on all routes except static files and api routes\nconst config = {\n    matcher: [\n        \"/((?!_next/static|_next/image|favicon.ico|api/).*)\"\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vc3JjL21pZGRsZXdhcmUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUEyQztBQUVVO0FBRXJELDBEQUEwRDtBQUMxRCxNQUFNRSxrQkFBa0I7SUFBQztJQUFjO0NBQU87QUFFdkMsZUFBZUMsV0FBV0MsT0FBb0I7SUFDbkQsa0NBQWtDO0lBQ2xDLE1BQU1DLG1CQUFtQkgsZ0JBQWdCSSxJQUFJLENBQUMsQ0FBQ0MsUUFDN0NILFFBQVFJLE9BQU8sQ0FBQ0MsUUFBUSxDQUFDQyxVQUFVLENBQUNIO0lBR3RDLDBEQUEwRDtJQUMxRCxJQUFJLENBQUNGLG9CQUFvQkQsUUFBUUksT0FBTyxDQUFDQyxRQUFRLENBQUNDLFVBQVUsQ0FBQyxTQUFTO1FBQ3BFLE9BQU9WLHFEQUFZQSxDQUFDVyxJQUFJO0lBQzFCO0lBRUEsbUVBQW1FO0lBQ25FLE1BQU1DLGNBQWNDLDBDQUFvQyxJQUFJLENBQUU7SUFDOUQsTUFBTUcsY0FBY0gsa05BQXlDLElBQUksQ0FBRTtJQUVuRSxJQUFJLENBQUNELGVBQWUsQ0FBQ0ksYUFBYTtRQUNoQ0UsUUFBUUMsS0FBSyxDQUFDO1FBQ2QsT0FBT25CLHFEQUFZQSxDQUFDVyxJQUFJO0lBQzFCO0lBRUEsNkRBQTZEO0lBQzdELE1BQU1TLGlCQUFpQm5CLG1FQUFZQSxDQUFDVyxhQUFhSSxhQUFhO1FBQzVESyxNQUFNO1lBQ0pDLGdCQUFnQjtZQUNoQkMsa0JBQWtCO1lBQ2xCQyxvQkFBb0I7UUFDdEI7SUFDRjtJQUVBLHdDQUF3QztJQUN4QyxNQUFNQyxhQUFhckIsUUFBUXNCLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLG9CQUFvQnZCLFFBQVFzQixPQUFPLENBQUNDLEdBQUcsQ0FBQztJQUUvRSxrREFBa0Q7SUFDbEQsSUFBSSxDQUFDRixZQUFZO1FBQ2ZQLFFBQVFVLEdBQUcsQ0FBQztRQUNaLE1BQU1DLGNBQWMsSUFBSUMsSUFBSSxVQUFVMUIsUUFBUTJCLEdBQUc7UUFDakRGLFlBQVlHLFlBQVksQ0FBQ0MsR0FBRyxDQUFDLFlBQVk3QixRQUFRSSxPQUFPLENBQUNDLFFBQVE7UUFDakUsT0FBT1QscURBQVlBLENBQUNrQyxRQUFRLENBQUNMO0lBQy9CO0lBRUEsSUFBSTtRQUNGLDBDQUEwQztRQUMxQyxNQUFNLEVBQUVNLE1BQU0sRUFBRUMsT0FBTyxFQUFFLEVBQUUsR0FBRyxNQUFNaEIsZUFBZUMsSUFBSSxDQUFDZ0IsVUFBVTtRQUVsRSw2RUFBNkU7UUFDN0UsSUFBSSxDQUFDRCxXQUFXL0Isa0JBQWtCO1lBQ2hDYSxRQUFRVSxHQUFHLENBQUM7WUFDWixNQUFNQyxjQUFjLElBQUlDLElBQUksVUFBVTFCLFFBQVEyQixHQUFHO1lBQ2pERixZQUFZRyxZQUFZLENBQUNDLEdBQUcsQ0FBQyxZQUFZN0IsUUFBUUksT0FBTyxDQUFDQyxRQUFRO1lBQ2pFLE9BQU9ULHFEQUFZQSxDQUFDa0MsUUFBUSxDQUFDTDtRQUMvQjtJQUNGLEVBQUUsT0FBT1YsT0FBTztRQUNkRCxRQUFRQyxLQUFLLENBQUMsNkJBQTZCQTtJQUM3QztJQUVBLE9BQU9uQixxREFBWUEsQ0FBQ1csSUFBSTtBQUMxQjtBQUVBLGtFQUFrRTtBQUMzRCxNQUFNMkIsU0FBUztJQUNwQkMsU0FBUztRQUFDO0tBQXFEO0FBQ2pFLEVBQUUiLCJzb3VyY2VzIjpbIi9Vc2Vycy9ydWRpaGluZHMvY29kZS9sYW5nZ3JhcGgtYWdlbnQvYXBwcy93ZWIvc3JjL21pZGRsZXdhcmUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCI7XG5pbXBvcnQgdHlwZSB7IE5leHRSZXF1ZXN0IH0gZnJvbSBcIm5leHQvc2VydmVyXCI7XG5pbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tIFwiQHN1cGFiYXNlL3N1cGFiYXNlLWpzXCI7XG5cbi8vIERlZmluZSB0aGUgcHJvdGVjdGVkIHJvdXRlcyB0aGF0IHJlcXVpcmUgYXV0aGVudGljYXRpb25cbmNvbnN0IHByb3RlY3RlZFJvdXRlcyA9IFtcIi9wcm9wb3NhbHNcIiwgXCIvbmV3XCJdO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbWlkZGxld2FyZShyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICAvLyBDaGVjayBpZiB0aGUgcm91dGUgaXMgcHJvdGVjdGVkXG4gIGNvbnN0IGlzUHJvdGVjdGVkUm91dGUgPSBwcm90ZWN0ZWRSb3V0ZXMuc29tZSgocm91dGUpID0+XG4gICAgcmVxdWVzdC5uZXh0VXJsLnBhdGhuYW1lLnN0YXJ0c1dpdGgocm91dGUpXG4gICk7XG5cbiAgLy8gU2tpcCBtaWRkbGV3YXJlIGZvciBub24tcHJvdGVjdGVkIHJvdXRlcyBhbmQgQVBJIHJvdXRlc1xuICBpZiAoIWlzUHJvdGVjdGVkUm91dGUgfHwgcmVxdWVzdC5uZXh0VXJsLnBhdGhuYW1lLnN0YXJ0c1dpdGgoXCIvYXBpXCIpKSB7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5uZXh0KCk7XG4gIH1cblxuICAvLyBHZXQgU3VwYWJhc2UgY29va2llcyBmcm9tIHRoZSByZXF1ZXN0IGZvciBzZXJ2ZXItc2lkZSBhdXRoIGNoZWNrXG4gIGNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIHx8IFwiXCI7XG4gIGNvbnN0IHN1cGFiYXNlS2V5ID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkgfHwgXCJcIjtcblxuICBpZiAoIXN1cGFiYXNlVXJsIHx8ICFzdXBhYmFzZUtleSkge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJNaXNzaW5nIFN1cGFiYXNlIGVudmlyb25tZW50IHZhcmlhYmxlc1wiKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLm5leHQoKTtcbiAgfVxuXG4gIC8vIENyZWF0ZSBhIFN1cGFiYXNlIGNsaWVudCB3aXRoIHRoZSBjb29raWVzIGZyb20gdGhlIHJlcXVlc3RcbiAgY29uc3Qgc3VwYWJhc2VDbGllbnQgPSBjcmVhdGVDbGllbnQoc3VwYWJhc2VVcmwsIHN1cGFiYXNlS2V5LCB7XG4gICAgYXV0aDoge1xuICAgICAgcGVyc2lzdFNlc3Npb246IGZhbHNlLCAvLyBEb24ndCBwZXJzaXN0IGluIG1pZGRsZXdhcmUgY29udGV4dFxuICAgICAgYXV0b1JlZnJlc2hUb2tlbjogZmFsc2UsXG4gICAgICBkZXRlY3RTZXNzaW9uSW5Vcmw6IGZhbHNlLFxuICAgIH0sXG4gIH0pO1xuXG4gIC8vIEdldCB0aGUgYXV0aCBjb29raWVzIGZyb20gdGhlIHJlcXVlc3RcbiAgY29uc3QgYXV0aENvb2tpZSA9IHJlcXVlc3QuY29va2llcy5nZXQoXCJzYi1hdXRoLXRva2VuXCIpIHx8IHJlcXVlc3QuY29va2llcy5nZXQoXCJzdXBhYmFzZS1hdXRoLXRva2VuXCIpO1xuICBcbiAgLy8gSWYgbm8gYXV0aCBjb29raWUgaXMgcHJlc2VudCwgcmVkaXJlY3QgdG8gbG9naW5cbiAgaWYgKCFhdXRoQ29va2llKSB7XG4gICAgY29uc29sZS5sb2coXCJObyBhdXRoIGNvb2tpZSBmb3VuZCwgcmVkaXJlY3RpbmcgdG8gbG9naW5cIik7XG4gICAgY29uc3QgcmVkaXJlY3RVcmwgPSBuZXcgVVJMKFwiL2xvZ2luXCIsIHJlcXVlc3QudXJsKTtcbiAgICByZWRpcmVjdFVybC5zZWFyY2hQYXJhbXMuc2V0KFwicmVkaXJlY3RcIiwgcmVxdWVzdC5uZXh0VXJsLnBhdGhuYW1lKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KHJlZGlyZWN0VXJsKTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgLy8gVHJ5IHRvIGdldCB0aGUgc2Vzc2lvbiB1c2luZyB0aGUgY29va2llXG4gICAgY29uc3QgeyBkYXRhOiB7IHNlc3Npb24gfSB9ID0gYXdhaXQgc3VwYWJhc2VDbGllbnQuYXV0aC5nZXRTZXNzaW9uKCk7XG5cbiAgICAvLyBJZiB0aGVyZSdzIG5vIGFjdGl2ZSBzZXNzaW9uIGFuZCB0aGUgcm91dGUgaXMgcHJvdGVjdGVkLCByZWRpcmVjdCB0byBsb2dpblxuICAgIGlmICghc2Vzc2lvbiAmJiBpc1Byb3RlY3RlZFJvdXRlKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIk5vIGFjdGl2ZSBzZXNzaW9uIGZvdW5kLCByZWRpcmVjdGluZyB0byBsb2dpblwiKTtcbiAgICAgIGNvbnN0IHJlZGlyZWN0VXJsID0gbmV3IFVSTChcIi9sb2dpblwiLCByZXF1ZXN0LnVybCk7XG4gICAgICByZWRpcmVjdFVybC5zZWFyY2hQYXJhbXMuc2V0KFwicmVkaXJlY3RcIiwgcmVxdWVzdC5uZXh0VXJsLnBhdGhuYW1lKTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UucmVkaXJlY3QocmVkaXJlY3RVcmwpO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW4gYXV0aCBtaWRkbGV3YXJlOlwiLCBlcnJvcik7XG4gIH1cblxuICByZXR1cm4gTmV4dFJlc3BvbnNlLm5leHQoKTtcbn1cblxuLy8gUnVuIG1pZGRsZXdhcmUgb24gYWxsIHJvdXRlcyBleGNlcHQgc3RhdGljIGZpbGVzIGFuZCBhcGkgcm91dGVzXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xuICBtYXRjaGVyOiBbXCIvKCg/IV9uZXh0L3N0YXRpY3xfbmV4dC9pbWFnZXxmYXZpY29uLmljb3xhcGkvKS4qKVwiXSxcbn07XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiY3JlYXRlQ2xpZW50IiwicHJvdGVjdGVkUm91dGVzIiwibWlkZGxld2FyZSIsInJlcXVlc3QiLCJpc1Byb3RlY3RlZFJvdXRlIiwic29tZSIsInJvdXRlIiwibmV4dFVybCIsInBhdGhuYW1lIiwic3RhcnRzV2l0aCIsIm5leHQiLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJzdXBhYmFzZUtleSIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwiY29uc29sZSIsImVycm9yIiwic3VwYWJhc2VDbGllbnQiLCJhdXRoIiwicGVyc2lzdFNlc3Npb24iLCJhdXRvUmVmcmVzaFRva2VuIiwiZGV0ZWN0U2Vzc2lvbkluVXJsIiwiYXV0aENvb2tpZSIsImNvb2tpZXMiLCJnZXQiLCJsb2ciLCJyZWRpcmVjdFVybCIsIlVSTCIsInVybCIsInNlYXJjaFBhcmFtcyIsInNldCIsInJlZGlyZWN0IiwiZGF0YSIsInNlc3Npb24iLCJnZXRTZXNzaW9uIiwiY29uZmlnIiwibWF0Y2hlciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(middleware)/./src/middleware.ts\n");

/***/ })

});